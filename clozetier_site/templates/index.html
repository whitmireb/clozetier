{% extends 'base.html' %}
{% block title %}Clozetier{% endblock %}

{% block content %}
    <div class="container">
        <!-- Closet Box -->
        <div class="closet-box">
            <h1 style="text-align: center;">Add an item</h1>
            <form method="POST" enctype="multipart/form-data" action="{% url 'index' %}">
                {% csrf_token %}
                <div style="display: flex;">
                    <div style="flex: 1; padding-top: 20px; padding-right: 10px; padding-bottom: 20px;">
                        <button id="file-upload-button" type="button" class="custom-button" style="float: right;">
                            <div class="shadow"></div>
                            <div class="edge"></div>
                            <div class="front">
                                <span>Choose File</span>
                            </div>
                        </button>
                    </div>
                    <input id="file-upload" type="file" name="image" style="display: none;" required />

                    <div style="flex: 1; padding-top: 20px; padding-bottom: 20px; padding-left: 10px;">
                        <button id="upload-button" type="submit" class="custom-button">
                            <div class="shadow"></div>
                            <div class="edge"></div>
                            <div class="front">
                                <span>Upload Image</span>
                            </div>
                        </button>
                    </div>
                </div>
            </form>
            
            {% if uploaded_image_url %}
            <img src="{{ uploaded_image_url }}" alt="Uploaded Image" style="display: block; width: auto; height: 200px; margin-left: auto; margin-right: auto; padding-bottom: 20px;">

            <form method="POST" action="{% url 'save_item' %}">
                {% csrf_token %}
                <input type="hidden" name="image" value="{{ uploaded_image_url|cut:"media/" }}">
                <h2 for="predicted-type">Predicted Clothing Type:</h2>
            
                <select class="styled-select" id="predicted-type", name="predicted_type">
                    {% for label in clothing_labels %}
                    <option value="{{ label }}" {% if predicted_type == label %} selected {% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
           

                
                <h2>Predicted Color:</h2>
                <select id="predicted-color" name="predicted_color">
                    {% for label in color_labels %}
                    <option value="{{ label }}" {% if predicted_color == label %} selected {% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                <div style="padding:20px">
                <button id="save-button" type="submit" class="custom-button">
                    <div class="shadow"></div>
                    <div class="edge"></div>
                    <div class="front">
                        <span>Save Image</span>
                    </div>
                </button>
                </div>
            </form>
            {% endif %}

        </div>

        <!-- Outfit Creator Box -->
        <div class="outfit-creator-box">
            <h2>Outfit Creator</h2>
            <div class="outfit-section" id="hats">
                <h4>Hats</h4>
                <div class="scrollable">
                    {% for item in categorized_items.hats %}
                        <img src="{{ item.image.url }}" alt="Hat" class="outfit-image">
                    {% empty %}
                        <p>No hats available.</p>
                    {% endfor %}
                </div>
            </div>
            <div class="outfit-section" id="tops">
                <h4>Tops</h4>
                <div class="scrollable">
                    {% for item in categorized_items.tops %}
                        <img src="{{ item.image.url }}" alt="Top" class="outfit-image">
                    {% empty %}
                        <p>No tops available.</p>
                    {% endfor %}
                </div>
            </div>
            <div class="outfit-section" id="bottoms">
                <h4>Bottoms</h4>
                <div class="scrollable">
                    {% for item in categorized_items.bottoms %}
                        <img src="{{ item.image.url }}" alt="Bottom" class="outfit-image">
                    {% empty %}
                        <p>No bottoms available.</p>
                    {% endfor %}
                </div>
            </div>
            <div class="outfit-section" id="shoes">
                <h4>Shoes</h4>
                <div class="scrollable">
                    {% for item in categorized_items.shoes %}
                        <img src="{{ item.image.url }}" alt="Shoe" class="outfit-image">
                    {% empty %}
                        <p>No shoes available.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
